## 프로젝트 개요

이 프로젝트는 **업무를 노드(Node) 기반 그래프로 시각화**하여 진행도를 한눈에 파악하고, 동시에 **부서 간 문서 열람 요청·승인 프로세스를 자동화**하는 통합 워크플로우 관리 서비스입니다.

업무 간 선후 관계와 의존성을 그래프로 표현해 팀 전체의 현재 상태를 직관적으로 보여주고, 다른 부서의 문서가 필요할 때는 키워드 검색과 승인 플로우를 한 화면에서 처리할 수 있도록 설계되었습니다.

---

## 문제 정의

1. **업무 진행 상황이 분산되어 가시성이 떨어짐**
   - 업무가 여러 사람·부서·툴(메신저, 이메일, 스프레드시트 등)에 흩어져 있어  
     “지금 어떤 일이 어디까지 되어 있는지”를 한 번에 파악하기 어렵습니다.
   - 특히 선행/후행 작업이 얽혀 있는 경우, 어느 작업이 병목인지 찾기 힘들고  
     일정 지연의 원인 분석이 늦어집니다.

2. **부서 간 문서 열람/공유 요청 프로세스의 비효율**
   - 필요한 문서를 찾기 위해 여러 저장소(메일, 드라이브, 사내 시스템)를 뒤져야 하고,  
     권한 요청은 메일·메신저로 비공식적으로 이루어지는 경우가 많습니다.
   - 승인·반려 히스토리가 남지 않거나, 담당자가 바뀌면 “누가 언제 무엇을 승인했는지”가 불명확해집니다.

3. **문서 검색 및 승인 과정의 자동화 부족**
   - 문서 내용 기반 검색이 아닌, 파일명/폴더 구조에 의존하는 경우가 많아  
     실제로 필요한 문서를 찾기 어렵습니다.
   - 승인 요청 → 검토 → 승인/반려 → 요청자 알림까지의 흐름이 자동화되어 있지 않아  
     사람이 계속 상태를 추적해야 합니다.

---

## 해결 방식

1. **업무를 노드 기반 그래프로 시각화**
   - 각 업무(Task)를 노드(Node)로 표현하고, 의존 관계를 엣지(Edge)로 연결하여  
     전체 업무 구조와 진행 상태를 한 화면에서 보여줍니다.
   - 노드의 상태(TODO / IN_PROGRESS / DONE 등)를 통해  
     팀·프로젝트 단위의 진행도를 직관적으로 파악할 수 있습니다.
   - 상위 작업과 하위 작업(서브태스크)을 계층적으로 표현하여  
     “큰 업무가 어떤 작은 단위들로 쪼개져 있는지”를 명확히 보여줍니다.

2. **문서 요청·승인 워크플로우 내장**
   - 별도의 메일 작성 없이, 서비스 내 `Document Request Form`에서  
     요청자/부서/키워드/승인자를 입력해 문서 열람 요청을 생성합니다.
   - 시스템이 내부 문서들을 검색해 **매칭되는 문서 수를 계산**하고,  
     동시에 승인자에게 승인 요청 메일을 자동 발송합니다.
   - 승인·반려는 웹 폼(Approve / Reject Form)을 통해 처리되며,  
     결과는 요청자에게 자동 알림(이메일)으로 전달됩니다.

3. **문서 검색 및 인덱싱 자동화**
   - 문서 업로드 시, Upstage API를 통해 PDF/DOCX/XLSX 등의 내용을 파싱하고  
     텍스트·메타데이터를 추출한 뒤 데이터베이스에 인덱싱합니다.
   - 키워드 기반 검색과 부서별 필터링을 지원하여  
     “누가 어떤 문서를 볼 수 있는지”를 제어하면서도 검색 편의성을 확보합니다.

4. **알림 및 로그 기반 투명한 히스토리 관리**
   - 문서 요청 생성, 승인/반려 처리, 문서 인덱싱 등 주요 이벤트에 대해  
     이메일 알림과 데이터베이스 기록을 남겨 추후 감사·추적이 가능합니다.
   - 이를 통해 조직 내 문서 접근에 대한 투명성과 보안성을 동시에 추구합니다.

---

## 주요 기능

### 1. 노드 기반 업무 보드

- 업무(Task) 목록 및 상태 관리
- 상위/하위 업무 관계(서브태스크) 표현
- Node & Edge 기반 시각화로 전체 구조와 의존성 파악
- 업무별 담당자, 설명, 상태, 타임스탬프 관리

### 2. 문서 요청 폼 (`/document-request`)

- 요청자 이메일·소속 부서 입력
- 필요한 문서를 설명하는 키워드 입력
- 승인자(Approver) 이메일 지정
- 긴급도(urgency: low/normal/high) 설정
- 요청 처리 결과(성공/실패)에 대한 실시간 피드백 UI

### 3. 문서 인덱싱 및 검색 API

- **문서 인덱싱**:  
  - `POST /api/documents/index`  
  - 파일 업로드 → Upstage API 파싱 → DB 저장 및 검색 인덱스 생성  
  - 인덱싱 완료 후 n8n 웹훅 호출 등으로 외부 워크플로우와 연동 가능

- **문서 검색 및 요청 생성**:  
  - `POST /api/documents/request`  
  - 키워드 기반으로 관련 문서를 검색하고, 요청 레코드를 생성하며,  
    승인자에게 승인 요청 메일 발송

### 4. 승인/반려 처리 플로우

- **승인 폼** (`/approve-form`)
  - 승인자는 요청 이메일에 포함된 링크를 통해 접근
  - 문서 ID 및 공유 링크 입력 후 승인 처리
  - 승인 결과는 요청자에게 이메일로 전달

- **반려 폼** (`/reject-form`)
  - 반려 사유 입력 후 제출
  - 반려 결과 역시 요청자에게 자동 알림

### 5. 테스트용 대시보드 (`/test-doc-request`)

- 모의 문서 리스트와 요청 히스토리 확인
- 특정 사용자(예: 홍길동)의 요청 이력 조회
- 데이터베이스 없이도 기본 플로우를 확인할 수 있는 목업 페이지

---

## 사용자 시나리오 (예시)

1. **프로젝트 매니저가 업무 구조를 설계**
   - 프로젝트를 시작하며 주요 업무들을 노드로 등록하고,  
     선행/후행 관계 및 서브태스크 구조를 정의합니다.
   - 메인 보드에서 전체 업무 그래프를 보며 일정과 리소스를 조율합니다.

2. **실무자가 다른 부서 문서 열람을 요청**
   - 특정 업무를 진행하다가 다른 부서의 정책 문서가 필요해집니다.
   - `/document-request` 페이지에서 키워드를 입력하고, 담당 부서의 승인자를 지정하여 요청을 생성합니다.

3. **승인자가 요청을 검토하고 승인/반려**
   - 승인자는 이메일로 도착한 링크를 눌러 승인/반려 폼에 접속합니다.
   - 문서를 확인한 뒤, 승인 시 공유 링크를 입력하고, 반려 시 사유를 남깁니다.

4. **요청자는 결과 알림을 받고 업무를 이어감**
   - 승인되면 공유 링크를 통해 문서를 열람하고,  
     노드 보드 상에서 관련 업무를 계속 진행합니다.
   - 반려된 경우, 사유를 참고하여 추가 정보 제공이나 다른 문서 요청 등 다음 액션을 결정합니다.

---

## 기술 스택 및 구조

- **프론트엔드 & 백엔드**
  - Next.js 14 (App Router)
  - React 18
  - React Flow (업무 노드 그래프 시각화)

- **데이터베이스**
  - PostgreSQL
  - `documents`, `document_requests` 등 테이블을 통한 문서 및 요청 관리
  - Full-text search 인덱스로 문서 내용 검색 지원

- **인프라 & 연동**
  - Nodemailer를 통한 이메일 발송
  - Upstage API를 활용한 문서 파싱 및 인덱싱
  - n8n 등 외부 워크플로우 도구와의 웹훅 연동 고려

- **기타**
  - TypeScript 기반 개발
  - Tailwind CSS 및 커스텀 스타일을 활용한 UI 구성

---

## 기대 효과

1. **업무 가시성 향상**
   - 그래프 기반 보드로 전체 업무 구조와 진행 상태를 한눈에 파악할 수 있어  
     병목 업무와 리스크를 빠르게 발견할 수 있습니다.

2. **문서 요청 리드타임 단축**
   - 문서 검색·요청·승인·알림이 하나의 시스템 안에서 자동으로 이어지기 때문에  
     메일 왕복 횟수와 대기 시간을 크게 줄일 수 있습니다.

3. **협업 투명성 및 보안 강화**
   - 누가 언제 무엇을 요청·승인/반려했는지 기록이 남고,  
     부서/권한 기준의 접근 제어를 통해 보안성을 유지할 수 있습니다.

4. **확장 가능성**
   - 추후 AI 기반 문서 추천, 업무 우선순위 추천,  
     조직 전체 워크플로우 분석 등으로 쉽게 확장할 수 있는 구조입니다.


